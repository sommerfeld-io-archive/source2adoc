= ADR-002: Choosing a Development Ecosystem

[cols="1,6"]
|===
|Status |Accepted
|Decision Date |2024-05-13
|Decision |Go with Cobra
|===

== Context
In order to develop the source2adoc CLI, a decision needs to be made regarding the choice of development ecosystem. Two main options are under consideration: Kotlin with Spring Shell and Go with Cobra.

[cols="1,3,3", options="header"]
|===
||Kotlin with Spring Shell |Go with Cobra
3+|*Pros*
|Modern Language |Kotlin offers modern features like null safety and coroutines. |Go provides simplicity and ease of learning.
|Strong Typing |Kotlin's static typing helps catch errors at compile time. |Go's static typing ensures code reliability and performance.
|CLI Library |Spring Shell integrates seamlessly with Spring ecosystem. |Cobra provides a comprehensive CLI framework for Go.
|Ecosystem |Access to vast Java ecosystem for libraries and tools. |Go's standard library is extensive and well-documented.
|Developer Experience |IntelliJ IDEA offers excellent support for Kotlin development. |VSCode with Go extension provides a solid development experience.
|Testing |Kotlin has robust testing frameworks like JUnit and Spek. |Go has built-in testing support with go test.
|Code Analysis |SonarCloud supports Kotlin code analysis. |Go's static analysis tools like go vet and go lint are effective. SonarCloud is also supported, although slightly more complex to setup (code coverage report).
3+|*Cons*
|Overhead |Kotlin runs on the JVM, which can lead to increased memory usage. |Go compiles to native binaries, avoiding JVM overhead.
|Learning Curve |Spring ecosystem and Kotlin syntax might have a steeper learning curve. |Go's simplicity might limit flexibility in complex scenarios.
|Performance |JVM-based applications may have slightly higher startup time. |Go's compiled binaries generally have faster startup times.
|===

One essential requirement is to treat the IDE as code. VSCode supports devcontainers (which can be used for Kotlin), but Go has a more straightforward setup with the Go extension.

Kotlin development is better done with IntelliJ IDEA, which is not as well-suited for treating the IDE as code due to the missing devcontainer feature. Additionally the maintainer does not own a license for IntelliJ IDEA and (as of now) it is not known whether the Community Edition is sufficient for the project.

== Decision
After evaluating the pros and cons of each ecosystem, it is recommended to proceed with Go with Cobra for developing the source2adoc CLI.

While both ecosystems offer advantages such as modern language features and strong typing, Go's simplicity, ease of learning, and excellent support for command-line interface development through Cobra align well with the requirements of this project. Kotlin and Spring Shell are well-suited for enterprise applications, while Go with Cobra is a popular choice for command-line interface development.

Additionally, considering the intention to ship the CLI as a Docker image and utilize VSCode with the devcontainer feature, the deployment and distribution experience would be similar for both ecosystems.

== Consequences
By selecting Go with Cobra as the development ecosystem for the source2adoc CLI, the project will benefit from a straightforward and efficient development process, well-suited for command-line interface development. This decision also aligns with the intention to leverage Docker for deployment and VSCode with devcontainer for development, ensuring a seamless workflow.
